/*! GestureRecognition 06-01-2015 */
!function(a){"use strict";var b=function(a){for(var b={E:[-22.5,22.5],NE:[22.5,67.5],N:[67.5,112.5],NW:[112.5,157.5],W:[157.5,181],"W ":[-181,-157.5],WS:[-157.5,-112.5],S:[-112.5,-67.5],ES:[-67.5,-22.5]},c=180*a/Math.PI,d=Object.keys(b),e=0;e<d.length;e++){var f=d[e],g=b[f];if(c>=g[0]&&c<g[1])return f.trim()}},c=function(b){this.config={width:400,height:300};for(var d in b)this.config[d]=b[d];c.base(this,"constructor"),this.hornsService=new a.OpticalFlow(this.config),this.lastFrame=new a.Uint8ClampedArray(this.config.width*this.config.height*4)};a.tracking.inherits(c,a.tracking.Tracker),c.prototype.track=function(a){this.emit("track",this.hornsService.getFlowData([this.lastFrame,a])),this.lastFrame=a},c.VERSION="0.0.1",a.OpticalFlowTracker=c;var d=function(d){this.config={hmm:{states:["a","b","c"],symbols:["E","NE","N","NW","W","WS","S","ES"],startProbability:{a:.1,b:.1,c:.1}},gestures:{right:[["W","W","W","W","W","W","W","W"],["W","W","W","W","W","W","W","W"],["W","W","W","W","W","W","W","W"],["W","W","W","W","W","W","W","W"],["W","W","W","W","W","WS","W","W"],["W","WS","W","W","W","W","W","W"]]},getVideoElement:function(){var b=a.document.createElement("video");return b.style.position="absolute",b.style.left="-1000000000em",b.style.top="-10000000em",b.style.width="200px",b.style.height="150px",b.autoplay=!0,b.preload=!0,b.muted=!0,b.looped=!0,a.document.body.appendChild(b),b},opticalFlow:{width:200,height:150},onMove:[],minimalMovementVectorLength:.05};for(var e in d)this.config[e]=d[e];var f=new a.MultiGestureHMM(this.config.hmm),g=new c(this.config.opticalFlow),h=function(a){this.config.onMove.forEach(function(b){b(a)})}.bind(this);this.teach=function(a,b){f.teach(a,b)},this.onDetect=function(a,b){f.onDetect(a,b)},this.onMove=function(a){this.config.onMove.push(a)},this.startTracking=function(){a.tracking.track(this.config.getVideoElement(),g,{camera:!0})};for(var i in this.config.gestures)this.teach(i,this.config.gestures[i]);g.on("track",function(a){var c=[a.xAvg,a.yAvg],d=Math.sqrt(c[0]*c[0]+c[1]*c[1]);if(d>this.config.minimalMovementVectorLength){var e=Math.atan2(c[1],c[0]),g=b(e);h(g),f.newSymbol(g)}}.bind(this))};d.VERSION="0.0.1",a.GestureRecognition=d}(this);